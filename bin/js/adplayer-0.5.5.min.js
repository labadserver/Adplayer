/*
   -------------------------------------------------------------------------------------------
   AdPlayer v0.5.5 (dev.111811)
   Author: christopher.sancho@adtech.com, felix.ritter@adtech.com
   -------------------------------------------------------------------------------------------
  
   This file is part of AdPlayer v0.5.0.dev.100511.
   AdPlayer is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   AdPlayer is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with AdPlayer.  If not, see <http://www.gnu.org/licenses/>.
  
  --------------------------------------------------------------------------------------------
*/
if(typeof AdPlayerManager==="undefined"){var Util=(function(){var b={};b.jsonUrl="js/json2.min.js";b.isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;b.isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;b.isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;b.isFF=(navigator.userAgent.indexOf("Firefox")!=-1)?true:false;b.log=function(d,c){if(typeof(console)!=="undefined"&&console!=null){if(c){console.log("AdPlayer("+c+"): "+d)}else{console.log("AdPlayer: "+d)}}};b.setClassName=function(c,d){c.setAttribute("class",d);if(b.isIE){c.setAttribute("className",d)}};b.ready=function(i,g,h,d,j,c,f){if(!f){f=false}function e(s,q,n,p,l,k){var r=0;function m(){r++;if(r==100){clearInterval(o);l.apply(q,c);return}if(s()){clearInterval(o);n.apply(q,p);return}}var o=setInterval(m,100)}e(i,g,h,d,j,c)};var a=[];b.loadScript=function(d,i,e,l){var m;var g;var n=function(){if(c(d)){function p(){if(!c(d)){clearInterval(o);j()}}var o=setInterval(p,100)}else{a.push(d);j()}};var j=function(){if(!h()){var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",e);var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(p,o);m=setInterval(k,100)}else{k()}};var k=function(){if(h()){clearInterval(m);f(d);l()}};var h=function(){try{if(i()){return true}}catch(o){return false}};var c=function(p){for(var o=0;o<a.length;o++){if(p==a[o]){return true}}return false};var f=function(p){for(var o=0;o<a.length;o++){if(p==a[o]){a=a.slice(o,1);return}}};n()};b.jsonParse=function(d,c,e){if(typeof JSON!=="undefined"){e(JSON.parse(d,c))}else{b.loadScript("JSON",function(){return JSON},b.jsonUrl,function(){e(JSON.parse(d,c))})}};b.jsonStringify=function(e,c,d){if(typeof JSON!=="undefined"){d(JSON.stringify(e,c))}else{b.loadScript("JSON",function(){return JSON},b.jsonUrl,function(){d(JSON.stringify(e,c))})}};return b})();var AbstractPostMsg=(function(){var b={};var a;b.send=function(d,c){};b.receive=function(c){};return b});var PostMsgDefault=(function(){var b=new AbstractPostMsg();function a(){if(window.addEventListener){window.addEventListener("message",b.receive,false)}else{if(window.attachEvent){window.attachEvent("onmessage",b.receive)}}}b.send=function(d,c){c.postMessage(d,"*")};b.receive=function(c){Util.jsonParse(c.data,null,function(e){if(e.postType==PostMessage.OUTGOING){for(var d=0;d<document.getElementsByTagName("iframe").length;d++){if(document.getElementsByTagName("iframe")[d].contentWindow==c.source){var f=document.getElementsByTagName("iframe")[d];PostMessageHandler.domRefPlayerWait(f,e);break}}}else{if(e.postType==PostMessage.INCOMING){PostMessageHandler.inMsgHandler(e)}}})};a();return b});var PostMessageHandler=(function(){var b={};b.domRefPlayerWait=function(e,c){b.dom=e;b.json=c;function d(i,g){var h=new Object();h.postType=PostMessage.INCOMING;h.uid=g.uid;h.fn="iframePlayerVerify";var f=b.getPlayerByDomSearch(i);if(f){if(g.fn=="iframePlayerVerify"){h.params=true;PostMessage.send(h,i.contentWindow);return}a(i,g,f)}else{h.params=false;PostMessage.send(h,i.contentWindow)}}Util.ready(function(){return b.dom},this,d,[b.dom,b.json],null,null)};b.getPlayerByDomSearch=function(e){var c=e.parentNode;while(!AdPlayerManager.getAdPlayerById(c.id)){c=c.parentNode;parName=c.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(c){var d=AdPlayerManager.getAdPlayerById(c.id);if(d){Util.log("Found player at "+d.adDomElement().id);return(d)}else{Util.log('No AdPlayer found after parent search for "'+e.id+'."');return null}}};function a(g,e,d){if(d){var i=e.params.split(",");for(var c=0;c<i.length;c++){switch(e.fn){case"addEventListener":if(unescape(i[c]).match(PostMessage.FUNCTION)){var h=unescape(i[c]).slice(PostMessage.FUNCTION.length);function f(j){var k=new Object();k.postType=PostMessage.INCOMING;k.uid=e.uid;k.fn=h;k.evtType=j.type();k.uidName=e.uidName;PostMessage.send(k,g.contentWindow)}f.uidName=e.uidName;i[c]=f}break}}switch(e.fn){case"removeEventListener":i.push(e.uidName.toString());break;case"track":adEvtObj=new AdEvent(i[0]);adEvtObj.target(d);adEvtObj.currentTarget(d);d.track(new AdEvent(i[0]),i[1]);return;break}d[e.fn].apply(d,i)}}b.inMsgHandler=function(e){switch(e.fn){case"iframePlayerVerify":var h;for(var d=0;d<AdPlayerManager.factoryList().length;d++){if(AdPlayerManager.factoryList()[d].uid()==e.uid){h=AdPlayerManager.factoryList()[d];break}}if(h){h.setIframePlayerType(e)}return;break;case"defaultTrackCallBack":break;default:var g=(new Function("return( "+e.fn+" );"))();var c=AdPlayerManager.getPlayerByUID(e.uid);if(c){var f=new AdEvent(e.evtType);f.target(c);g(f)}break}};return b})();var PostMessage=(function(){var c={};var a;c.OUTGOING="PostMessage.Outgoing";c.INCOMING="PostMessage.Incoming";c.FUNCTION="PostMessage.Function: ";function b(){if(typeof(window.postMessage)==typeof(Function)){a=new PostMsgDefault()}else{a=new AbstractPostMsg()}}c.send=function(e,d){e.pmsgid=new Date().getTime();Util.jsonStringify(e,null,function(f){a.send(f,d)})};b();return c})();var PrivacyInfoButton=(function(h,a){var g={};g.button;g.iconPos="top-right";var b;var c;var e="Get Info";var f="privacyButton";g.openBtnTxt=function(i){if(i){e=i;if(c){c.innerHTML=e}}return e};function d(){g.openBtnTxt(a);g.button=document.createElement("div");Util.setClassName(g.button,f);b=document.createElement("div");Util.setClassName(b,"icon");g.button.appendChild(b);c=document.createElement("div");Util.setClassName(c,"text");c.style.display="none";g.button.appendChild(c);c.innerHTML=g.openBtnTxt();g.button.onclick=h;b.onmouseover=function(){c.style.display="block"};b.onmouseout=function(){c.style.display="none"}}g.setPosition=function(i){g.button.setAttribute("style","");b.setAttribute("style","");c.setAttribute("style","display: none;");g.button.style.position="absolute";g.button.style.zIndex="99999999";b.style.position="absolute";c.style.position="absolute";c.style.fontSize="12px";c.style.fontWeight="bold";c.style.width="100px";switch(i){case"bottom-left-out":g.button.style.bottom="0px";g.button.style.left="0px";b.style.left="0px";b.style.top="0px";c.style.left="16px";c.style.top="3px";c.style.textAlign="left";break;case"bottom-left":g.button.style.bottom="20px";g.button.style.left="0px";b.style.left="0px";b.style.top="0px";c.style.left="16px";c.style.top="3px";c.style.textAlign="left";break;case"bottom-right-out":g.button.style.bottom="0px";g.button.style.right="0px";b.style.right="0px";b.style.top="0px";c.style.right="20px";c.style.top="3px";c.style.textAlign="right";break;case"bottom-right":g.button.style.bottom="20px";g.button.style.right="0px";b.style.right="0px";b.style.top="0px";c.style.right="20px";c.style.top="3px";c.style.textAlign="right";break;case"top-right-out":g.button.style.top="-20px";g.button.style.right="0px";b.style.right="0px";b.style.top="0px";c.style.right="20px";c.style.top="3px";c.style.textAlign="right";break;case"top-right":g.button.style.top="0px";g.button.style.right="0px";b.style.right="0px";b.style.top="0px";c.style.right="20px";c.style.top="3px";c.style.textAlign="right";break;case"top-left-out":g.button.style.top="-20px";g.button.style.left="0px";b.style.left="0px";b.style.top="0px";c.style.left="16px";c.style.top="3px";c.style.textAlign="left";break;default:g.button.style.top="0px";g.button.style.left="0px";b.style.left="0px";b.style.top="0px";c.style.left="16px";c.style.top="3px";c.style.textAlign="left";break}Util.setClassName(g.button,f+" "+i)};d();return g});var PrivacyPanel=(function(i,s,b,e,g,c){var m={};m.panel;var o;var k;var l="privacyPanel";m.infoList=function(u){if(u){k=u;if(o){o.innerHTML="";for(var t=0;t<k.length;t++){j(k[t])}}}return k};var f;var d="X";m.closeTxt=function(t){if(t){d=t;if(d!=""){f.innerHTML=d}}return d};var p;var q="";m.headerTxt=function(t){if(t){q=t;if(p){p.innerHTML=q;if(q!=""){if(!r("div","header")){if(o){m.panel.insertBefore(p,o)}else{m.panel.appendChild(p)}}}}}return q};var h;var a="";m.footerTxt=function(t){if(t){a=t;if(h){h.innerHTML=a;if(a!=""){if(!r("div","footer")){m.panel.appendChild(h)}}}}return q};function n(){m.panel=document.createElement("div");Util.setClassName(m.panel,l);f=document.createElement("div");Util.setClassName(f,"close");f.innerHTML=m.closeTxt(s);f.onclick=g;m.panel.appendChild(f);p=document.createElement("div");Util.setClassName(p,"header");m.headerTxt(b);o=document.createElement("div");Util.setClassName(o,"list");m.panel.appendChild(o);m.infoList(i);h=document.createElement("div");Util.setClassName(h,"footer");m.footerTxt(e)}function j(t){var u=document.createElement("div");u.setAttribute("class","item");if(Util.isIE){u.setAttribute("className","item")}privacyClick=function(v){var w=new Object();w.url=v;c(new AdEvent(AdEvent.PRIVACY_CLICK,w));window.open(v)};u.innerHTML='<h4 style="margin:0; padding:0;">- <span>'+t.adServer+"</span></h4><p>"+t.message+"</p><p><a href=\"javascript:privacyClick('"+t.url+'\');" target="_self">'+t.urlText+"</a></p>";o.appendChild(u)}function r(u,v){for(var t=0;t<m.panel.getElementsByTagName(u).length;t++){if(m.panel.getElementsByTagName(u)[t].className==v){return m.panel.getElementsByTagName(u)[t]}}return null}m.setPosition=function(t){m.panel.setAttribute("style","");m.panel.style.position="absolute";m.panel.style.zIndex="999999999";switch(t){case"bottom-left-out":case"bottom-left":m.panel.style.bottom="0px";m.panel.style.left="0px";break;case"bottom-right-out":case"bottom-right":m.panel.style.bottom="0px";m.panel.style.right="0px";break;case"top-right-out":case"top-right":m.panel.style.top="0px";m.panel.style.right="0px";break;default:m.panel.style.top="0px";m.panel.style.left="0px";break}Util.setClassName(m.panel,l+" "+t)};n();return m});var PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";a.urlText="";return a});var PixelRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var c=new Image();c.src=b.url;Util.log(b.url,"PixelRequest")}else{Util.log("PixelRequest",'Parameter "url" is not defined.')}};return b});function AdEvent(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}}var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];AdEvent.list=new Object();AdEvent.check=function(b){for(var a in AdEvent.list){if(AdEvent.list[a]==b){return true}}Util.log("Ad Event type is not valid: "+b,"AdEvent");return false};AdEvent.map=function(a){AdEvent.list[a]="AdEvent."+a;AdEvent[a]="AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){AdEvent.map(defaultAdEvents[dae])}AbstractPlayer=(function(h,l){var f={};var k;f.uid=function(m){if(m){k=m}return k};f.uid(h);var g;f.adDomElement=function(m){if(m){g=m}return g};f.adDomElement(l);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(m){if(m===true){c=m}return c};var i=false;f.isPrivacyPanelEnabled=function(m){if(m===true){i=m}return i};var j=true;f.isAdChoiceEnabled=function(m){if(m===false){j=m}return j};var b=null;f.adWidth=function(m){if(m&&!isNan(m)){b=m;this.adDomElement().style.width=b}return b};var a=null;f.adHeight=function(m){if(m&&!isNan(m)){a=m;this.adDomElement().style.height=a}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(m,n){};f.removeEventListener=function(m,o,n){};f.addTrackingPixel=function(m,n,o){};f.removeTrackingPixel=function(m,n){};f.track=function(n,m){};f.addPrivacyInfo=function(m,q,p,o,n){};f.enableAdChoice=function(m,o,q,p,n){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};f.setPosition=function(m){};return f});var DefaultPlayer=(function(c,a){var d=new AbstractPlayer(c,a);d.addEventListener=function(e,g){if(!AdEvent.check(e)){return}if(!d.adEventListObj()[e]){d.adEventListObj()[e]=[]}for(var f=0;f<d.adEventListObj()[e].length;f++){if(d.adEventListObj()[e][f]==g){return}}d.adEventListObj()[e].push(g)};d.removeEventListener=function(e,h,f){if(!AdEvent.check(e)){return}if(d.adEventListObj()[e]){for(var g=0;g<d.adEventListObj()[e].length;g++){if(f){if(f==d.adEventListObj()[e][g].uidName){d.adEventListObj()[e].splice(g,1);break}}else{if(d.adEventListObj()[e][g]==h){d.adEventListObj()[e].splice(g,1);break}}}if(d.adEventListObj()[e].length==0){delete d.adEventListObj()[e]}}};d.addTrackingPixel=function(e,f,h){if(!AdEvent.check(e)){return}if(h===undefined){h=true}if(f){function g(i){var j=new PixelRequest(f);j.load();if(!h){d.removeEventListener(i.type(),g)}}g.url=f;g.repeat=h;d.addEventListener(e,g,false)}else{Util.log("Parameter 'url' must be defined","addTrackingEvent")}};d.removeTrackingPixel=function(e,h){if(!AdEvent.check(e)){return}if(d.adEventListObj()[e]){var f=d.adEventListObj()[e].length;var i=0;var g=0;do{if(h){if(d.adEventListObj()[e][g].name=="defaultTrackCallBack"){if(d.adEventListObj()[e][g].url){if(d.adEventListObj()[e][g].url==h){d.adEventListObj()[e].splice(g,1);if(d.adEventListObj()[e].length==0){delete d.adEventListObj()[e];return}}}}}if(d.adEventListObj()[e]){i=f-d.adEventListObj()[e].length;f=d.adEventListObj()[e].length}else{f=0}if(i==0){g++}}while(g<f)}};d.track=function(l,h,i){try{if(!AdEvent.check(l.type())){return}}catch(k){return}if(d.adEventListObj()[l.type()]){var f=d.adEventListObj()[l.type()].length;var m=0;var g=0;do{l.target(d);if(i){l.currentTarget(i)}else{l.currentTarget(d)}if(h){l.data().url=h}d.adEventListObj()[l.type()][g](l);if(d.adEventListObj()[l.type()]){m=f-d.adEventListObj()[l.type()].length;f=d.adEventListObj()[l.type()].length}else{f=0}if(m==0){g++}}while(g<f)}if(h){var j=new PixelRequest(h);j.load()}};d.addPrivacyInfo=function(e,j,i,h,f){var g=new PrivacyInfo();g.adServer=e;g.message=j;if(!h||h==""){h="Opt Out"}g.urlText=h;g.url=i;d.privacyInfoList().push(g);if(f!==false){d.enableAdChoice()}};d.privacyInfoBtn;d.privacyPanel;d.iconPos="top-right";d.enableAdChoice=function(e,g,i,h,f){if(!d.privacyPanel){d.privacyPanel=new PrivacyPanel(d.privacyInfoList(),g,i,h,d.toggle,d.track)}else{d.privacyPanel.infoList(d.privacyInfoList());d.privacyPanel.closeTxt(g);d.privacyPanel.headerTxt(i);d.privacyPanel.footerTxt(h)}if(!d.privacyInfoBtn){d.adDomElement().style.position="relative";d.privacyInfoBtn=new PrivacyInfoButton(d.toggle,e);if(f){d.iconPos=f}d.setPosition(d.iconPos)}else{d.privacyInfoBtn.openBtnTxt(e)}if((d.isAdChoiceEnabled()===true)&&(d.privacyInfoList().length>0)){d.adDomElement().appendChild(d.privacyInfoBtn.button)}};var b=false;d.toggle=function(){if(!b){b=true;d.showPrivacyInfo()}else{b=false;d.hidePrivacyInfo()}};d.setPosition=function(e){if(d.privacyInfoBtn){d.privacyInfoBtn.setPosition(e);d.privacyPanel.setPosition(e)}else{d.enableAdChoice(null,null,null,null,e)}};d.disableAdChoice=function(){d.isAdChoiceEnabled(false);d.adDomElement().removeChild(d.privacyInfoBtn.button)};d.showPrivacyInfo=function(){d.adDomElement().appendChild(d.privacyPanel.panel);d.isPrivacyPanelEnabled(true);d.track(new AdEvent(AdEvent.PRIVACY_OPEN))};d.hidePrivacyInfo=function(){if(d.privacyPanel){d.isPrivacyPanelEnabled(false);d.adDomElement().removeChild(d.privacyPanel.panel);d.track(new AdEvent(AdEvent.PRIVACY_CLOSE))}};return d});var ReferencePlayer=(function(d,a,c){var f=new AbstractPlayer(d,a);var b=new DefaultPlayer(d,a);function e(h,g){b[h].apply(f,g);c[h].apply(f,g)}f.addEventListener=function(g,h){e("addEventListener",[g,h,this])};f.removeEventListener=function(g,i,h){e("removeEventListener",[g,i,h,this])};f.addTrackingPixel=function(g,h,i){e("addTrackingPixel",[g,h,i,this])};f.removeTrackingPixel=function(g,h){e("removeTrackingPixel",[g,h,this])};f.track=function(i,g,h){e("track",[i,g,h,this])};f.addPrivacyInfo=function(g,k,j,i,h){b.isAdChoiceEnabled(false);e("addPrivacyInfo",[g,k,j,i,h,this])};f.enableAdChoice=function(g,i,k,j,h){b.isAdChoiceEnabled(false);e("enableAdChoice",[g,i,k,j,h,this])};f.showPrivacyInfo=function(){e("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){e("hidePrivacyInfo",[this])};f.setPosition=function(g){e("setPosition",[g,this])};return f});var IframePlayer=(function(d,a){var g=new AbstractPlayer(d,a);var c=new DefaultPlayer(d,a);function f(i,h){return c[i].apply(g,h)}function b(i,k,h){var j;if(h){j=h}else{j=new Object()}j.postType=PostMessage.OUTGOING;j.uid=d;j.fn=i;j.params=k.toString();PostMessage.send(j,parent)}function e(h){var i=h.replace(/\s+/g," ");if(i.search(/function /i,"")==0){funcStartPos=i.search(/function /i,"");funcEndPos=0;funcLen=9;funcEndPos=funcStartPos+funcLen;startPos=funcEndPos;endPos=i.search(/\(/)}else{if(i.search(/var /i,"")==0){varLen=4;startPos=4}else{varLen=0;startPos=0}endPos=i.search(/\=/)}funcName=i.substring(startPos,endPos).replace(/\s+/g,"");return escape(PostMessage.FUNCTION+funcName)}g.uid=function(h){return f("uid",[h])};g.adDomElement=function(h){return f("adDomElement",[h])};g.adDomElement(a);g.adEventListObj=function(){return f("adEventListObj",[null])};g.isLoaded=function(h){return f("isLoaded",[h])};g.isPrivacyPanelEnabled=function(h){return f("isPrivacyPanelEnabled",[h])};g.isAdChoiceEnabled=function(h){return f("isAdChoiceEnabled",[h])};g.adWidth=function(h){return f("adWidth",[h])};g.adHeight=function(h){return f("adHeight",[h])};g.privacyInfoList=function(){return f("privacyInfoList",[null])};g.addEventListener=function(h,j){j.uidName=d+new Date().getTime();f("addEventListener",[h,j,this]);var i=new Object();i.uidName=j.uidName;b("addEventListener",[h,e(j.toString())],i)};g.removeEventListener=function(h,k,i){f("removeEventListener",[h,k,i,this]);var j=new Object();j.uidName=k.uidName;b("removeEventListener",[h,e(k.toString())],j)};g.addTrackingPixel=function(h,i,k){if(!AdEvent.check(h)){return}if(k===undefined){k=true}if(i){function j(l){var m=new PixelRequest(i);m.load();if(!k){g.removeEventListener(l.type(),j)}}j.url=i;j.repeat=k;this.addEventListener(h,j,false)}else{Util.log("Parameter 'url' must be defined","addTrackingEvent")}};g.removeTrackingPixel=function(h,k){if(!AdEvent.check(h)){return}if(this.adEventListObj()[h]){var i=this.adEventListObj()[h].length;var l=0;var j=0;do{if(k){if(this.adEventListObj()[h][j].name=="defaultTrackCallBack"){if(this.adEventListObj()[h][j].url){if(this.adEventListObj()[h][j].url==k){this.adEventListObj()[h].splice(j,1);if(this.adEventListObj()[h].length==0){delete this.adEventListObj()[h];return}}}}}if(this.adEventListObj()[h]){l=i-this.adEventListObj()[h].length;i=this.adEventListObj()[h].length}else{i=0}if(l==0){j++}}while(j<i)}};g.track=function(j,h,i){f("track",[j,h,i,this]);b("track",[j.type(),h,"null"])};g.addPrivacyInfo=function(h,l,k,j,i){f("addPrivacyInfo",[h,l,k,j,i,this]);b("addPrivacyInfo",[h,l,k,j,i])};g.disableAdChoice=function(){f("disableAdChoice",[])};g.enableAdChoice=function(h,j,l,k,i){f("enableAdChoice",[h,j,l,k,i]);b("enableAdChoice",[h,j,l,k,i])};g.showPrivacyInfo=function(){f("showPrivacyInfo",[this]);b("showPrivacyInfo",[null])};g.hidePrivacyInfo=function(){f("hidePrivacyInfo",[this]);b("hidePrivacyInfo",[null])};g.setPosition=function(h){f("setPosition",[h,this]);b("setPosition",[h,null])};return g});var PlayerFactory=(function(j,l,a,d){var i={};if(!j){Util.log("Unique ID is required.","AdPlayer");return}var m=(window.location!=window.parent.location)?true:false;function o(){if(l&&!d){if(g(l)){Util.ready(function(){return AdPlayerManager.getAdPlayerById(l)},i,h,[l,a],k,[j,l,a],true)}else{n(l);if(AdPlayerManager.isSearching()){Util.ready(function(){return document.getElementById(l)},i,e,[j,l,a],k,[j,l,a],true)}else{Util.ready(function(){return document.getElementById(l)},i,e,[j,l,a],k,[j,l,a],false)}}}else{if(l&&d){if(g(l)){Util.ready(function(){return d},i,c,[d,j,l,a],k,[j,l,a],false)}else{n(l);Util.ready(function(){return document.getElementById(l)},i,c,[d,j,l,a],k,[j,l,a],false)}}else{if(!l&&d){l=b();n(l);Util.ready(function(){return document.getElementById(l)},i,c,[d,j,l,a],k,[j,l,a],true)}else{if(!l&&!d){l=b();if(g(l)){Util.ready(function(){return AdPlayerManager.getAdPlayerById(l)},i,h,[l,a],k,[j,l,a],true)}else{n(l);if(AdPlayerManager.isSearching()){Util.ready(function(){return document.getElementById(l)},i,e,[j,l,a],k,[j,l,a],true)}else{Util.ready(function(){return document.getElementById(l)},i,e,[j,l,a],k,[j,l,a],false)}}}}}}}function c(s,p,r,q){if(document.getElementById(r)){q(new ReferencePlayer(p,document.getElementById(r),s))}else{q(new ReferencePlayer(p,s.adDomElement(),s))}}function h(q,p){p(AdPlayerManager.getAdPlayerById(q))}function g(q){var p=false;for(var r=0;r<AdPlayerManager.domIdList().length;r++){if(AdPlayerManager.domIdList()[r]==q){p=true;break}}return p}function n(q){for(var p=0;p<AdPlayerManager.domIdList().length;p++){if(AdPlayerManager.domIdList()[p]==q){return}}AdPlayerManager.domIdList().push(q)}function f(q){for(var p=0;p<AdPlayerManager.domIdList().length;p++){if(AdPlayerManager.domIdList()[p]==q){AdPlayerManager.domIdList().splice(p,1);break}}}function e(s,w,p){var t=document.getElementById(w).parentNode;while(!AdPlayerManager.getAdPlayerById(t.id)){t=t.parentNode;parName=t.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(t){var x=AdPlayerManager.getAdPlayerById(t.id);if(x){if(p){Util.log("Found player at "+x.adDomElement().id);p(x)}f(w)}else{Util.log("No AdPlayer found after parent search. Creating new player for "+s);if(m){if(String(window.location).search(/apstub.html\#\{(.*?)\}/)>-1){function u(B,y){for(var A=0;A<parent.document.getElementsByTagName("iframe").length;A++){if(parent.document.getElementsByTagName("iframe")[A].contentWindow==window){var z=parent.PostMessageHandler.getPlayerByDomSearch(parent.document.getElementsByTagName("iframe")[A]);if(z){p(z)}else{p(new DefaultPlayer(B,document.getElementById(y)))}break}}}u(s,w);return}var q=new IframePlayer(s,document.getElementById(w));p(q);var v=s+new Date().getTime();i.uid=function(){return v};AdPlayerManager.factoryList().push(i);var r=new Object();r.postType=PostMessage.OUTGOING;r.uid=i.uid();r.fn="iframePlayerVerify";PostMessage.send(r,parent);i.setIframePlayerType=function(z){for(var y=0;y<AdPlayerManager.list().length;y++){if(AdPlayerManager.list()[y].uid()==i.uid()){AdPlayerManager.list().splice(y,1);break}}if(z.params==true){q.disableAdChoice()}}}else{p(new DefaultPlayer(s,document.getElementById(w)))}f(w)}}}function k(q,p,r){r(new DefaultPlayer(q,document.getElementById(p)))}function b(){var p=new Date().getTime();Util.log('WARNING: No valid referral element specified for "'+j+'". Referral will be created using "document.write"',"parentDomSearch");domId="ref"+p;document.write('<span id="'+domId+'"></span>');return domId}o();return i});var AdPlayer=(function(g,c,a,e){var f=new AbstractPlayer(g,null);var h=[];var d;f.player=function(){return d};f.adDomElement=function(k){return d.adDomElement(k)};f.adEventListObj=function(){return d.adEventListObj()};f.isLoaded=function(k){return d.isLoaded(k)};f.isPrivacyPanelEnabled=function(k){return d.isPrivacyPanelEnabled(k)};f.adWidth=function(k){return d.adWidth(k)};f.adHeight=function(k){return d.adHeight(k)};f.privacyInfoList=function(){return d.privacyInfoList()};function j(l,k){if(!d){h.push(b(f[l],f,k));return}d[l].apply(f,k)}function b(l,k,m){return function(){l.apply(k,m)}}f.addEventListener=function(k,l){j("addEventListener",[k,l,this])};f.removeEventListener=function(k,m,l){j("removeEventListener",[k,m,l,this])};f.addTrackingPixel=function(k,l,m){j("addTrackingPixel",[k,l,m,this])};f.removeTrackingPixel=function(k,l){j("removeTrackingPixel",[k,l,this])};f.track=function(l,k){j("track",[l,k,this])};f.addPrivacyInfo=function(k,o,n,m,l){j("addPrivacyInfo",[k,o,n,m,l,this])};f.enableAdChoice=function(k,m,o,n,l){j("enableAdChoice",[k,m,o,n,l,this])};f.disableAdChoice=function(){j("disableAdChoice",[this])};f.showPrivacyInfo=function(){j("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){j("hidePrivacyInfo",[this])};f.setPosition=function(k){j("setPosition",[k,this])};function i(){var l=new PlayerFactory(g,c,k,e);function k(m){d=m;AdPlayerManager.addAdPlayer(d);if(a){a(f)}d.track(new AdEvent(AdEvent.INIT),null,f);while(h.length>0){(h.shift())()}}}i();return f});var AdPlayerManager=(function(){var g={};var a=[];var c=[];var e=[];function f(){}g.list=function(){return a};_factoryList=[];g.factoryList=function(){return _factoryList};var b=[];g.domIdList=function(){return b};g.searchCount=0;g.isSearching=function(h){if(g.searchCount==0){return false}else{return true}};g.addAdPlayer=function(j){for(var h=0;h<a.length;h++){if(typeof a[h].adDomElement!=="undefined"){if(a[h].adDomElement().id==j.adDomElement().id){return}}}a.push(j);d(j)};g.register=function(h){c.push(h)};g.unregister=function(j){for(var h=0;h<c.length;h++){if(c[h]==j){c.shift(h,1);return}}};g.getAdPlayerById=function(j){for(var h=0;h<a.length;h++){if(typeof a[h].adDomElement!=="undefined"){if(a[h].adDomElement().id==j){return a[h]}}else{Util.log("DOM element is not properly specified.","getPlayerById")}}return null};g.getPlayerByDomElement=function(j){for(var h=0;h<a.length;h++){if(a[h].adDomElement()){if(a[h].adDomElement()==j){return a[h]}}else{Util.log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};g.getPlayerByUID=function(j){for(var h=0;h<a.length;h++){if(a[h].uid()){if(a[h].uid()==j){return a[h]}}}return null};function d(j){var h=c.length;var k=0;var i=0;do{if(typeof c[i]=="function"){c[i](j)}if(c>0){k=h-c.length;h=c.length}else{h=0}if(k==0){i++}}while(i<h)}f();return g})()};