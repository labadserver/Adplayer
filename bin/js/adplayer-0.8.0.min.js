/*
   -------------------------------------------------------------------------------------------
   AdPlayer v0.8.0 (dev.041712)
   Author: christopher.sancho@adtech.com, felix.ritter@adtech.com
   -------------------------------------------------------------------------------------------
  
   This file is part of AdPlayer v0.8.0 (dev.041712).
   AdPlayer is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   AdPlayer is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with AdPlayer.  If not, see <http://www.gnu.org/licenses/>.
  
  --------------------------------------------------------------------------------------------
*/
if(typeof $ADP==="undefined"){var $ADP={};$ADP.Util=(function(){var b={};b.jsonUrl="js/json2.min.js";b.cssPrefix="adplayer";b.cssPrefixed=function(c){return b.cssPrefix+"-"+c};b.isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;b.isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;b.isFF=(navigator.userAgent.indexOf("Firefox")!=-1)?true:false;b.log=function(d,c){if(typeof(console)!=="undefined"&&console!=null){if(c){console.log("AdPlayer("+c+"): "+d)}else{console.log("AdPlayer: "+d)}}};b.setClassName=function(c,d){c.setAttribute("class",d);if(b.isIE){c.setAttribute("className",d)}};b.ready=function(h,f,g,d,i,c){function e(r,p,m,o,k,j){var q=0;function l(){q++;if(q==100){clearInterval(n);k.apply(p,c);return}if(r()){clearInterval(n);m.apply(p,o);return}}var n=setInterval(l,100)}e(h,f,g,d,i,c)};var a=[];b.loadScript=function(d,i,e,l){var m;var g;var n=function(){if(c(d)){function p(){if(!c(d)){clearInterval(o);j()}}var o=setInterval(p,100)}else{a.push(d);j()}};var j=function(){if(!h()){var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",e);var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(p,o);m=setInterval(k,100)}else{k()}};var k=function(){if(h()){clearInterval(m);f(d);l()}};var h=function(){try{if(i()){return true}}catch(o){return false}};var c=function(p){for(var o=0;o<a.length;o++){if(p==a[o]){return true}}return false};var f=function(p){for(var o=0;o<a.length;o++){if(p==a[o]){a=a.slice(o,1);return}}};n()};b.jsonParse=function(d,c,f){function e(h,g,i){try{i(JSON.parse(h,g))}catch(j){}}if(typeof JSON!=="undefined"){e(d,c,f)}else{b.loadScript("JSON",function(){return JSON},b.jsonUrl,function(){e(d,c,f)})}};b.jsonStringify=function(e,c,d){if(typeof JSON!=="undefined"){d(JSON.stringify(e,c))}else{b.loadScript("JSON",function(){return JSON},b.jsonUrl,function(){d(JSON.stringify(e,c))})}};return b})();$ADP.AbstractPostMsg=(function(){var b={};var a;b.send=function(d,c){};b.receive=function(c){};return b});$ADP.PostMsgDefault=(function(){var b=new $ADP.AbstractPostMsg();function a(){if(window.addEventListener){window.addEventListener("message",b.receive,false)}else{if(window.attachEvent){window.attachEvent("onmessage",b.receive)}}}b.send=function(d,c){c.postMessage(d,"*")};b.receive=function(c){$ADP.Util.jsonParse(c.data,null,function(e){if(e.postType==$ADP.PostMessage.OUTGOING){for(var d=0;d<document.getElementsByTagName("iframe").length;d++){if(document.getElementsByTagName("iframe")[d].contentWindow==c.source){var f=document.getElementsByTagName("iframe")[d];$ADP.PostMessageHandler.domRefPlayerWait(f,e);break}}}else{if(e.postType==$ADP.PostMessage.INCOMING){$ADP.PostMessageHandler.inMsgHandler(e)}}})};a();return b});$ADP.PostMessageHandler=(function(){var b={};b.domRefPlayerWait=function(f,c){b.dom=f;b.json=c;function d(j,h){var i=new Object();i.postType=$ADP.PostMessage.INCOMING;i.uid=h.uid;i.fn="iframePlayerVerify";var g=b.getPlayerByDomSearch(j);if(g){if(h.fn=="iframePlayerVerify"){i.params=true;$ADP.PostMessage.send(i,j.contentWindow);return}a(j,h,g)}else{i.params=false;$ADP.PostMessage.send(i,j.contentWindow)}}function e(){$ADP.Util.log("Could not verify a parent iframe AdPlayer.")}$ADP.Util.ready(function(){return b.dom},this,d,[b.dom,b.json],e,null)};b.getPlayerByDomSearch=function(e){var c=e.parentNode;while(!$ADP.AdPlayerManager.getAdPlayerById(c.id)){c=c.parentNode;parName=c.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(c){var d=$ADP.AdPlayerManager.getAdPlayerById(c.id);if(d){$ADP.Util.log("Found player at "+d.adDomElement().id);return(d)}else{$ADP.Util.log('No AdPlayer found after parent search for "'+e.id+'."');return null}}};function a(g,e,d){if(d){var i=e.params.split(",");for(var c=0;c<i.length;c++){switch(e.fn){case"addEventListener":if(unescape(i[c]).match($ADP.PostMessage.FUNCTION)){var h=unescape(i[c]).slice($ADP.PostMessage.FUNCTION.length);function f(j){var k=new Object();k.postType=$ADP.PostMessage.INCOMING;k.uid=e.uid;k.fn=h;k.evtType=j.type();k.uidName=e.uidName;$ADP.PostMessage.send(k,g.contentWindow)}f.uidName=e.uidName;i[c]=f}break}}switch(e.fn){case"removeEventListener":i.push(e.uidName.toString());break;case"track":adEvtObj=new $ADP.AdEvent(i[0]);adEvtObj.target(d);adEvtObj.currentTarget(d);d.track(new $ADP.AdEvent(i[0]),i[1]);return;break}d[e.fn].apply(d,i)}}b.inMsgHandler=function(e){switch(e.fn){case"iframePlayerVerify":var h;for(var d=0;d<$ADP.AdPlayerManager.factoryList().length;d++){if($ADP.AdPlayerManager.factoryList()[d].uid()==e.uid){h=$ADP.AdPlayerManager.factoryList()[d];break}}if(h){h.setIframePlayerType(e)}return;break;case"defaultTrackCallBack":break;default:var g=(new Function("return( "+e.fn+" );"))();var c=$ADP.AdPlayerManager.getPlayerByUID(e.uid);if(c){var f=new $ADP.AdEvent(e.evtType);f.target(c);g(f)}break}};return b})();$ADP.PostMessage=(function(){var c={};var a;c.OUTGOING="PostMessage.Outgoing";c.INCOMING="PostMessage.Incoming";c.FUNCTION="PostMessage.Function: ";function b(){if(typeof(window.postMessage)==typeof(Function)){a=new $ADP.PostMsgDefault()}else{a=new $ADP.AbstractPostMsg()}}c.send=function(e,d){e.pmsgid=new Date().getTime();$ADP.Util.jsonStringify(e,null,function(f){a.send(f,d)})};b();return c})();$ADP.PrivacyInfoButton=(function(h,a){var g={};var b;var c;var f="privacyButton";g.button;var e="Get Info";g.openBtnTxt=function(i){if(i){e=i;if(c){c.innerHTML=e}}return e};function d(){g.openBtnTxt(a);g.button=document.createElement("div");$ADP.Util.setClassName(g.button,$ADP.Util.cssPrefixed(f));b=document.createElement("div");$ADP.Util.setClassName(b,$ADP.Util.cssPrefixed("icon"));g.button.appendChild(b);c=document.createElement("div");$ADP.Util.setClassName(c,$ADP.Util.cssPrefixed("text"));c.style.display="none";g.button.appendChild(c);c.innerHTML=g.openBtnTxt();g.button.onclick=h;b.onmouseover=function(){c.style.display="block"};b.onmouseout=function(){c.style.display="none"}}g.setPosition=function(i){c.setAttribute("style","display: none;");$ADP.Util.setClassName(g.button,$ADP.Util.cssPrefixed(f)+" "+$ADP.Util.cssPrefixed(i))};d();return g});$ADP.PrivacyPanel=(function(i,g,c,s,b,e){var m={};var o;var k;var l="privacyPanel";m.panel;m.infoList=function(u){if(u){k=u;if(o){o.innerHTML="";for(var t=0;t<k.length;t++){j(k[t])}}}return k};var f;var d="X";m.closeTxt=function(t){if(t){d=t;if(d!=""){f.innerHTML=d}}return d};var p;var q="";m.headerTxt=function(t){if(t){q=t;if(p){p.innerHTML=q;if(q!=""){if(!r("div",$ADP.Util.cssPrefixed("header"))){if(o){m.panel.insertBefore(p,o)}else{m.panel.appendChild(p)}}}}}return q};var h;var a="";m.footerTxt=function(t){if(t){a=t;if(h){h.innerHTML=a;if(a!=""){if(!r("div",$ADP.Util.cssPrefixed("footer"))){m.panel.appendChild(h)}}}}return q};function n(){m.panel=document.createElement("div");$ADP.Util.setClassName(m.panel,$ADP.Util.cssPrefixed(l));f=document.createElement("div");$ADP.Util.setClassName(f,$ADP.Util.cssPrefixed("close"));f.innerHTML=m.closeTxt(s);f.onclick=g;m.panel.appendChild(f);p=document.createElement("div");$ADP.Util.setClassName(p,$ADP.Util.cssPrefixed("header"));m.headerTxt(b);o=document.createElement("ul");$ADP.Util.setClassName(o,$ADP.Util.cssPrefixed("privacyInfoList"));m.panel.appendChild(o);m.infoList(i);h=document.createElement("div");$ADP.Util.setClassName(h,$ADP.Util.cssPrefixed("footer"));m.footerTxt(e)}function j(t){var u=document.createElement("li");u.setAttribute("class",$ADP.Util.cssPrefixed("privacyItem"));if($ADP.Util.isIE){u.setAttribute("className",$ADP.Util.cssPrefixed("privacyItem"))}privacyClick=function(v){var w=new Object();w.url=v;c(new $ADP.AdEvent($ADP.AdEvent.PRIVACY_CLICK,w));window.open(v)};u.innerHTML='<h4 class="'+$ADP.Util.cssPrefixed("privacyItemHeader")+'">'+t.adServer+'</h4><p class="'+$ADP.Util.cssPrefixed("privacyItemInfo")+'">'+t.message+'</p><p class="'+$ADP.Util.cssPrefixed("privacyItemLinkOuter")+'"><a class="'+$ADP.Util.cssPrefixed("privacyItemLink")+'" href="javascript:privacyClick(\''+t.url+'\');" target="_self">'+t.urlText+"</a></p>";o.appendChild(u)}function r(u,v){for(var t=0;t<m.panel.getElementsByTagName(u).length;t++){if(m.panel.getElementsByTagName(u)[t].className==v){return m.panel.getElementsByTagName(u)[t]}}return null}m.setPosition=function(t){$ADP.Util.setClassName(m.panel,$ADP.Util.cssPrefixed(l)+" "+$ADP.Util.cssPrefixed(t))};n();return m});$ADP.PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";a.urlText="";return a});$ADP.PixelRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var c=new Image();c.src=b.url;$ADP.Util.log(b.url,"$ADP.PixelRequest")}else{$ADP.Util.log("$ADP.PixelRequest",'Parameter "url" is not defined.')}};return b});$ADP.AdEvent=function(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}};var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];$ADP.AdEvent.list=new Object();$ADP.AdEvent.check=function(b){for(var a in $ADP.AdEvent.list){if($ADP.AdEvent.list[a]==b){return true}}$ADP.Util.log("Ad Event type is not valid: "+b,"$ADP.AdEvent");return false};$ADP.AdEvent.map=function(a){$ADP.AdEvent.list[a]="$ADP.AdEvent."+a;$ADP.AdEvent[a]="$ADP.AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){$ADP.AdEvent.map(defaultAdEvents[dae])}$ADP.AbstractPlayer=(function(h,l){var f={};var k;f.uid=function(m){if(m){k=m}return k};f.uid(h);var g;f.adDomElement=function(m){if(m){g=m}return g};f.adDomElement(l);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(m){if(m===true){c=m}return c};var i=false;f.isPrivacyPanelEnabled=function(m){if(m===true){i=m}return i};var j=true;f.isAdChoiceEnabled=function(m){if(m===false){j=m}return j};var b=null;f.adWidth=function(m){if(m&&!isNan(m)){b=m;this.adDomElement().style.width=b}return b};var a=null;f.adHeight=function(m){if(m&&!isNan(m)){a=m;this.adDomElement().style.height=a}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(m,n){};f.removeEventListener=function(m,o,n){};f.addTrackingPixel=function(m,n,o){};f.removeTrackingPixel=function(m,n){};f.track=function(n,m){};f.addPrivacyInfo=function(m,q,p,o,n){};f.enableAdChoice=function(m,o,q,p,n){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};f.setPosition=function(m){};return f});$ADP.DefaultPlayer=(function(c,a){var d=new $ADP.AbstractPlayer(c,a);d.addEventListener=function(e,g){if(!$ADP.AdEvent.check(e)){return}if(!d.adEventListObj()[e]){d.adEventListObj()[e]=[]}for(var f=0;f<d.adEventListObj()[e].length;f++){if(d.adEventListObj()[e][f]==g){return}}d.adEventListObj()[e].push(g)};d.removeEventListener=function(e,h,f){if(!$ADP.AdEvent.check(e)){return}if(d.adEventListObj()[e]){for(var g=0;g<d.adEventListObj()[e].length;g++){if(f){if(f==d.adEventListObj()[e][g].uidName){d.adEventListObj()[e].splice(g,1);break}}else{if(d.adEventListObj()[e][g]==h){d.adEventListObj()[e].splice(g,1);break}}}if(d.adEventListObj()[e].length==0){delete d.adEventListObj()[e]}}};d.addTrackingPixel=function(e,f,h){if(!$ADP.AdEvent.check(e)){return}if(h===undefined){h=true}if(f){function g(i){var j=new $ADP.PixelRequest(f);j.load();if(!h){d.removeEventListener(i.type(),g)}}g.url=f;g.repeat=h;d.addEventListener(e,g,false)}else{$ADP.Util.log("Parameter 'url' must be defined","addTrackingEvent")}};d.removeTrackingPixel=function(e,h){if(!$ADP.AdEvent.check(e)){return}if(d.adEventListObj()[e]){var f=d.adEventListObj()[e].length;var i=0;var g=0;do{if(h){if(d.adEventListObj()[e][g].name=="defaultTrackCallBack"){if(d.adEventListObj()[e][g].url){if(d.adEventListObj()[e][g].url==h){d.adEventListObj()[e].splice(g,1);if(d.adEventListObj()[e].length==0){delete d.adEventListObj()[e];return}}}}}if(d.adEventListObj()[e]){i=f-d.adEventListObj()[e].length;f=d.adEventListObj()[e].length}else{f=0}if(i==0){g++}}while(g<f)}};d.track=function(l,h,i){try{if(!$ADP.AdEvent.check(l.type())){return}}catch(k){return}if(d.adEventListObj()[l.type()]){var f=d.adEventListObj()[l.type()].length;var m=0;var g=0;do{l.target(d);if(i){l.currentTarget(i)}else{l.currentTarget(d)}if(h){l.data().url=h}d.adEventListObj()[l.type()][g](l);if(d.adEventListObj()[l.type()]){m=f-d.adEventListObj()[l.type()].length;f=d.adEventListObj()[l.type()].length}else{f=0}if(m==0){g++}}while(g<f)}if(h){var j=new $ADP.PixelRequest(h);j.load()}};d.addPrivacyInfo=function(e,j,i,h,f){var g=new $ADP.PrivacyInfo();g.adServer=e;g.message=j;if(!h||h==""){h="Opt Out"}g.urlText=h;g.url=i;d.privacyInfoList().push(g);if(f!==false){d.enableAdChoice()}};d.privacyInfoBtn;d.privacyPanel;d.iconPos="top-right";d.enableAdChoice=function(e,g,i,h,f){if(!d.privacyPanel){d.privacyPanel=new $ADP.PrivacyPanel(d.privacyInfoList(),d.toggle,d.track,g,i,h)}else{d.privacyPanel.infoList(d.privacyInfoList());d.privacyPanel.closeTxt(g);d.privacyPanel.headerTxt(i);d.privacyPanel.footerTxt(h)}if(!d.privacyInfoBtn){d.adDomElement().style.position="relative";d.privacyInfoBtn=new $ADP.PrivacyInfoButton(d.toggle,e);if(f){d.iconPos=f}d.setPosition(d.iconPos)}else{d.privacyInfoBtn.openBtnTxt(e)}if((d.isAdChoiceEnabled()===true)&&(d.privacyInfoList().length>0)){d.adDomElement().appendChild(d.privacyInfoBtn.button)}};var b=false;d.toggle=function(){if(!b){b=true;d.showPrivacyInfo()}else{b=false;d.hidePrivacyInfo()}};d.setPosition=function(e){if(d.privacyInfoBtn){d.privacyInfoBtn.setPosition(e);d.privacyPanel.setPosition(e)}else{d.enableAdChoice(null,null,null,null,e)}};d.disableAdChoice=function(){d.isAdChoiceEnabled(false);d.adDomElement().removeChild(d.privacyInfoBtn.button)};d.showPrivacyInfo=function(){d.adDomElement().appendChild(d.privacyPanel.panel);d.isPrivacyPanelEnabled(true);d.track(new $ADP.AdEvent($ADP.AdEvent.PRIVACY_OPEN))};d.hidePrivacyInfo=function(){if(d.privacyPanel){d.isPrivacyPanelEnabled(false);d.adDomElement().removeChild(d.privacyPanel.panel);d.track(new $ADP.AdEvent($ADP.AdEvent.PRIVACY_CLOSE))}};return d});$ADP.ReferencePlayer=(function(d,a,c){var f=new $ADP.AbstractPlayer(d,a);var b=new $ADP.DefaultPlayer(d,a);function e(h,g){b[h].apply(f,g);c[h].apply(f,g)}f.addEventListener=function(g,h){e("addEventListener",[g,h,this])};f.removeEventListener=function(g,i,h){e("removeEventListener",[g,i,h,this])};f.addTrackingPixel=function(g,h,i){e("addTrackingPixel",[g,h,i,this])};f.removeTrackingPixel=function(g,h){e("removeTrackingPixel",[g,h,this])};f.track=function(i,g,h){e("track",[i,g,h,this])};f.addPrivacyInfo=function(g,k,j,i,h){b.isAdChoiceEnabled(false);e("addPrivacyInfo",[g,k,j,i,h,this])};f.enableAdChoice=function(g,i,k,j,h){b.isAdChoiceEnabled(false);e("enableAdChoice",[g,i,k,j,h,this])};f.showPrivacyInfo=function(){e("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){e("hidePrivacyInfo",[this])};f.setPosition=function(g){e("setPosition",[g,this])};return f});$ADP.IframePlayer=(function(d,a){var g=new $ADP.AbstractPlayer(d,a);var c=new $ADP.DefaultPlayer(d,a);function f(i,h){return c[i].apply(g,h)}function b(i,k,h){var j;if(h){j=h}else{j=new Object()}j.postType=$ADP.PostMessage.OUTGOING;j.uid=d;j.fn=i;j.params=k.toString();$ADP.PostMessage.send(j,parent)}function e(h){var i=h.replace(/\s+/g," ");if(i.search(/function /i,"")==0){funcStartPos=i.search(/function /i,"");funcEndPos=0;funcLen=9;funcEndPos=funcStartPos+funcLen;startPos=funcEndPos;endPos=i.search(/\(/)}else{if(i.search(/var /i,"")==0){varLen=4;startPos=4}else{varLen=0;startPos=0}endPos=i.search(/\=/)}funcName=i.substring(startPos,endPos).replace(/\s+/g,"");return escape($ADP.PostMessage.FUNCTION+funcName)}g.uid=function(h){return f("uid",[h])};g.adDomElement=function(h){return f("adDomElement",[h])};g.adDomElement(a);g.adEventListObj=function(){return f("adEventListObj",[null])};g.isLoaded=function(h){return f("isLoaded",[h])};g.isPrivacyPanelEnabled=function(h){return f("isPrivacyPanelEnabled",[h])};g.isAdChoiceEnabled=function(h){return f("isAdChoiceEnabled",[h])};g.adWidth=function(h){return f("adWidth",[h])};g.adHeight=function(h){return f("adHeight",[h])};g.privacyInfoList=function(){return f("privacyInfoList",[null])};g.addEventListener=function(h,j){j.uidName=d+new Date().getTime();f("addEventListener",[h,j,this]);var i=new Object();i.uidName=j.uidName;b("addEventListener",[h,e(j.toString())],i)};g.removeEventListener=function(h,k,i){f("removeEventListener",[h,k,i,this]);var j=new Object();j.uidName=k.uidName;b("removeEventListener",[h,e(k.toString())],j)};g.addTrackingPixel=function(h,i,k){if(!$ADP.AdEvent.check(h)){return}if(k===undefined){k=true}if(i){function j(l){var m=new $ADP.PixelRequest(i);m.load();if(!k){g.removeEventListener(l.type(),j)}}j.url=i;j.repeat=k;this.addEventListener(h,j,false)}else{$ADP.Util.log("Parameter 'url' must be defined","addTrackingEvent")}};g.removeTrackingPixel=function(h,k){if(!$ADP.AdEvent.check(h)){return}if(this.adEventListObj()[h]){var i=this.adEventListObj()[h].length;var l=0;var j=0;do{if(k){if(this.adEventListObj()[h][j].name=="defaultTrackCallBack"){if(this.adEventListObj()[h][j].url){if(this.adEventListObj()[h][j].url==k){this.adEventListObj()[h].splice(j,1);if(this.adEventListObj()[h].length==0){delete this.adEventListObj()[h];return}}}}}if(this.adEventListObj()[h]){l=i-this.adEventListObj()[h].length;i=this.adEventListObj()[h].length}else{i=0}if(l==0){j++}}while(j<i)}};g.track=function(j,h,i){f("track",[j,h,i,this]);b("track",[j.type(),h,"null"])};g.addPrivacyInfo=function(h,l,k,j,i){f("addPrivacyInfo",[h,l,k,j,i,this]);b("addPrivacyInfo",[h,l,k,j,i])};g.disableAdChoice=function(){f("disableAdChoice",[])};g.enableAdChoice=function(h,j,l,k,i){f("enableAdChoice",[h,j,l,k,i]);b("enableAdChoice",[h,j,l,k,i])};g.showPrivacyInfo=function(){f("showPrivacyInfo",[this]);b("showPrivacyInfo",[null])};g.hidePrivacyInfo=function(){f("hidePrivacyInfo",[this]);b("hidePrivacyInfo",[null])};g.setPosition=function(h){f("setPosition",[h,this]);b("setPosition",[h,null])};return g});$ADP.PlayerFactory=(function(j,l,a,d){var i={};if(!j){$ADP.Util.log("Unique ID is required.","AdPlayer");return}var m=(window.location!=window.parent.location)?true:false;function o(){if(l&&!d){if(g(l)){$ADP.Util.ready(function(){return $ADP.AdPlayerManager.getAdPlayerById(l)},i,h,[l,a],k,[j,l,a])}else{n(l);$ADP.Util.ready(function(){return document.getElementById(l)},i,e,[j,l,a],k,[j,l,a])}}else{if(l&&d){if(g(l)){$ADP.Util.ready(function(){return d},i,c,[d,j,l,a],k,[j,l,a])}else{n(l);$ADP.Util.ready(function(){return document.getElementById(l)},i,c,[d,j,l,a],k,[j,l,a])}}else{if(!l&&d){l=b();n(l);$ADP.Util.ready(function(){return document.getElementById(l)},i,c,[d,j,l,a],k,[j,l,a])}else{if(!l&&!d){l=b();if(g(l)){$ADP.Util.ready(function(){return $ADP.AdPlayerManager.getAdPlayerById(l)},i,h,[l,a],k,[j,l,a])}else{n(l);$ADP.Util.ready(function(){return document.getElementById(l)},i,e,[j,l,a],k,[j,l,a])}}}}}}function c(s,q,p,r){if(document.getElementById(p)){r(new $ADP.ReferencePlayer(q,document.getElementById(p),s))}else{r(new $ADP.ReferencePlayer(q,s.adDomElement(),s))}}function h(p,q){q($ADP.AdPlayerManager.getAdPlayerById(p))}function g(q){var p=false;for(var r=0;r<$ADP.AdPlayerManager.domIdList().length;r++){if($ADP.AdPlayerManager.domIdList()[r]==q){p=true;break}}return p}function n(p){for(var q=0;q<$ADP.AdPlayerManager.domIdList().length;q++){if($ADP.AdPlayerManager.domIdList()[q]==p){return}}$ADP.AdPlayerManager.domIdList().push(p)}function f(p){for(var q=0;q<$ADP.AdPlayerManager.domIdList().length;q++){if($ADP.AdPlayerManager.domIdList()[q]==p){$ADP.AdPlayerManager.domIdList().splice(q,1);break}}}function e(u,A,p){var v=document.getElementById(A).parentNode;while(!$ADP.AdPlayerManager.getAdPlayerById(v.id)){v=v.parentNode;parName=v.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(v){var C=$ADP.AdPlayerManager.getAdPlayerById(v.id);if(C){if(p){$ADP.Util.log("Found player at "+C.adDomElement().id);p(C)}f(A)}else{$ADP.Util.log("No AdPlayer found after parent search for "+u);if(m){if(String(window.location).search(/apstub.html\#\{(.*?)\}/)>-1){function w(G,D){for(var F=0;F<parent.document.getElementsByTagName("iframe").length;F++){if(parent.document.getElementsByTagName("iframe")[F].contentWindow==window){var E=parent.$ADP.PostMessageHandler.getPlayerByDomSearch(parent.document.getElementsByTagName("iframe")[F]);if(E){p(E)}else{p(new $ADP.DefaultPlayer(G,document.getElementById(D)))}break}}}w(u,A);return}var q=new $ADP.IframePlayer(u,document.getElementById(A));p(q);var z=u+new Date().getTime();i.uid=function(){return z};$ADP.AdPlayerManager.factoryList().push(i);var t=new Object();t.postType=$ADP.PostMessage.OUTGOING;t.uid=i.uid();t.fn="iframePlayerVerify";$ADP.PostMessage.send(t,parent);i.setIframePlayerType=function(E){for(var D=0;D<$ADP.AdPlayerManager.list().length;D++){if($ADP.AdPlayerManager.list()[D].uid()==i.uid()){$ADP.AdPlayerManager.list().splice(D,1);break}}if(E.params==true){q.disableAdChoice()}}}else{if($ADP.Util.isIE){$ADP.Util.log("isIE is set to true.  Searching for previous sibling player...");function y(D){x=D.previousSibling;if(x==null){return false}else{while(x&&x.nodeType!=1){x=x.previousSibling;if($ADP.AdPlayerManager.getAdPlayerById(x.id)){break}}return x}}var s=$ADP.AdPlayerManager.getAdPlayerById(y(document.getElementById(A)).id);if(s){$ADP.Util.log("Found player at "+s.adDomElement().id);p(s);return}else{$ADP.Util.log("Searching parent div...");var B=document.getElementById(A).parentNode.childNodes;for(var r=0;r<B.length;r++){if(B[r].id!=""){s=$ADP.AdPlayerManager.getAdPlayerById(B[r].id);if(s){p(s);return}}}$ADP.Util.log("Creating new player for "+u);p(new $ADP.DefaultPlayer(u,document.getElementById(A)))}}$ADP.Util.log("Creating new player for "+u);p(new $ADP.DefaultPlayer(u,document.getElementById(A)))}f(A)}}}function k(q,p,r){r(new $ADP.DefaultPlayer(q,document.getElementById(p)))}function b(){var p=new Date().getTime();$ADP.Util.log('WARNING: No valid referral element specified for "'+j+'". Referral will be created using "document.write"',"parentDomSearch");domId="ref"+p;document.write('<span id="'+domId+'"></span>');return domId}o();return i});var AdPlayer=(function(g,c,a,e){var f=new $ADP.AbstractPlayer(g,null);var h=[];var d;f.player=function(){return d};f.adDomElement=function(k){return d.adDomElement(k)};f.adEventListObj=function(){return d.adEventListObj()};f.isLoaded=function(k){return d.isLoaded(k)};f.isPrivacyPanelEnabled=function(k){return d.isPrivacyPanelEnabled(k)};f.adWidth=function(k){return d.adWidth(k)};f.adHeight=function(k){return d.adHeight(k)};f.privacyInfoList=function(){return d.privacyInfoList()};function j(l,k){if(!d){h.push(b(f[l],f,k));return}d[l].apply(f,k)}function b(l,k,m){return function(){l.apply(k,m)}}f.addEventListener=function(k,l){j("addEventListener",[k,l,this])};f.removeEventListener=function(k,m,l){j("removeEventListener",[k,m,l,this])};f.addTrackingPixel=function(k,l,m){j("addTrackingPixel",[k,l,m,this])};f.removeTrackingPixel=function(k,l){j("removeTrackingPixel",[k,l,this])};f.track=function(l,k){j("track",[l,k,this])};f.addPrivacyInfo=function(k,o,n,m,l){j("addPrivacyInfo",[k,o,n,m,l,this])};f.enableAdChoice=function(k,m,o,n,l){j("enableAdChoice",[k,m,o,n,l,this])};f.disableAdChoice=function(){j("disableAdChoice",[this])};f.showPrivacyInfo=function(){j("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){j("hidePrivacyInfo",[this])};f.setPosition=function(k){j("setPosition",[k,this])};function i(){var l=new $ADP.PlayerFactory(g,c,k,e);function k(m){d=m;$ADP.AdPlayerManager.addAdPlayer(d);if(a){a(f)}while(h.length>0){(h.shift())()}d.track(new $ADP.AdEvent($ADP.AdEvent.INIT),null,f)}}i();return f});$ADP.AdPlayerManager=(function(){var h={};var b=[];var d=[];var f=[];function g(){}h.list=function(){return b};var a=[];h.factoryList=function(){return a};var c=[];h.domIdList=function(){return c};h.addAdPlayer=function(k){for(var j=0;j<b.length;j++){if(typeof b[j].adDomElement!=="undefined"){if(b[j].adDomElement().id==k.adDomElement().id){return}}}b.push(k);e(k)};h.register=function(i){d.push(i)};h.unregister=function(k){for(var j=0;j<d.length;j++){if(d[j]==k){d.shift(j,1);return}}};h.getAdPlayerById=function(k){for(var j=0;j<b.length;j++){if(typeof b[j].adDomElement!=="undefined"){if(b[j].adDomElement().id==k){return b[j]}}else{$ADP.Util.log("DOM element is not properly specified.","getPlayerById")}}return null};h.getPlayerByDomElement=function(k){for(var j=0;j<b.length;j++){if(b[j].adDomElement()){if(b[j].adDomElement()==k){return b[j]}}else{$ADP.Util.log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};h.getPlayerByUID=function(k){for(var j=0;j<b.length;j++){if(b[j].uid()){if(b[j].uid()==k){return b[j]}}}return null};function e(k){var i=d.length;var l=0;var j=0;do{if(typeof d[j]=="function"){d[j](k)}if(d>0){l=i-d.length;i=d.length}else{i=0}if(l==0){j++}}while(j<i)}g();return h})()};